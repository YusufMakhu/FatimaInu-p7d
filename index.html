<!DOCTYPE html>
<html lang="es" dir="ltr">
    <head> <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <meta name="x-poe-datastore-behavior" content="local_only">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' 'unsafe-eval' data: blob: https://cdnjs.cloudflare.com https://cdn.jsdelivr.net https://code.jquery.com https://unpkg.com https://d3js.org https://threejs.org https://cdn.plot.ly https://stackpath.bootstrapcdn.com https://maps.googleapis.com https://cdn.tailwindcss.com https://ajax.googleapis.com https://kit.fontawesome.com https://cdn.datatables.net https://maxcdn.bootstrapcdn.com https://code.highcharts.com https://tako-static-assets-production.s3.amazonaws.com https://www.youtube.com https://fonts.googleapis.com https://fonts.gstatic.com https://pfst.cf2.poecdn.net https://puc.poecdn.net https://i.imgur.com https://wikimedia.org https://*.icons8.com https://*.giphy.com https://picsum.photos https://images.unsplash.com; frame-src 'self' https://www.youtube.com https://trytako.com; child-src 'self'; manifest-src 'self'; worker-src 'self'; upgrade-insecure-requests; block-all-mixed-content;">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#0a0a0f">
    <title>7 Dujanbir — Fatima</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
    <link href="https://fonts.googleapis.com/css2?family=Amiri:ital,wght@0,400;0,700;1,400&amp;family=Cormorant+Garamond:ital,wght@0,400;0,500;0,600;1,400;1,500&amp;family=Inter:wght@300;400;500;600&amp;display=swap" rel="stylesheet">
    
    <style>
        :root {
            --bg-void: #0a0a0f;
            --bg-deep: #0d1117;
            --bg-card: rgba(19, 25, 32, 0.95);
            --bg-glass: rgba(13, 17, 23, 0.9);
            
            --gold: #c9a55c;
            --gold-light: #e0c88a;
            --gold-dark: #8b7355;
            --gold-glow: rgba(201, 165, 92, 0.25);
            
            --rose: #b07878;
            --rose-light: #d4a5a5;
            --rose-dark: #8b5a5a;
            
            --wine: #6b2d2d;
            --wine-glow: rgba(107, 45, 45, 0.4);
            --wine-deep: #4a1f1f;
            
            --cream: #f5efe6;
            --text-primary: #e8e6e3;
            --text-muted: #8b949e;
            --text-dim: #5a6370;
            
            --safe-top: env(safe-area-inset-top, 0px);
            --safe-bottom: env(safe-area-inset-bottom, 0px);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        html {
            font-size: 16px;
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Inter', -apple-system, sans-serif;
            background: var(--bg-void);
            color: var(--text-primary);
            min-height: 100vh;
            min-height: 100dvh;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
        }

        [dir="rtl"] {
            font-family: 'Amiri', 'Inter', sans-serif;
        }

        [dir="rtl"] .timeline {
            padding-left: 0;
            padding-right: 2.5rem;
        }

        [dir="rtl"] .timeline::before {
            left: auto;
            right: 10px;
        }

        [dir="rtl"] .timeline-marker {
            left: auto;
            right: -2.5rem;
        }

        [dir="rtl"] .timeline-quote {
            border-left: none;
            border-right: 2px solid var(--wine);
        }

        /* ============================================
           VOLUME SCREEN - Primera pantalla
           ============================================ */
        
        .volume-screen {
            position: fixed;
            inset: 0;
            z-index: 2000;
            background: var(--bg-void);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 2rem;
            cursor: pointer;
            transition: opacity 0.8s ease, visibility 0.8s ease;
        }

        .volume-screen.hidden {
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
        }

        .volume-icon {
            width: 80px;
            height: 80px;
            position: relative;
            animation: volumePulse 2s ease-in-out infinite;
        }

        .volume-icon svg {
            width: 100%;
            height: 100%;
            fill: none;
            stroke: var(--gold);
            stroke-width: 1.5;
        }

        .volume-waves {
            position: absolute;
            right: -15px;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            gap: 4px;
        }

        .volume-wave {
            width: 3px;
            background: var(--gold);
            border-radius: 2px;
            animation: waveAnim 1s ease-in-out infinite;
        }

        .volume-wave:nth-child(1) { height: 12px; animation-delay: 0s; }
        .volume-wave:nth-child(2) { height: 20px; animation-delay: 0.15s; }
        .volume-wave:nth-child(3) { height: 16px; animation-delay: 0.3s; }

        @keyframes waveAnim {
            0%, 100% { transform: scaleY(1); opacity: 0.5; }
            50% { transform: scaleY(1.5); opacity: 1; }
        }

        @keyframes volumePulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .volume-text {
            text-align: center;
        }

        .volume-title {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.4rem;
            color: var(--cream);
            margin-bottom: 0.5rem;
        }

        .volume-subtitle {
            font-size: 0.85rem;
            color: var(--text-muted);
        }

        .volume-tap {
            font-size: 0.7rem;
            color: var(--gold-dark);
            letter-spacing: 0.15em;
            text-transform: uppercase;
            margin-top: 1rem;
            animation: tapPulse 2s ease-in-out infinite;
        }

        @keyframes tapPulse {
            0%, 100% { opacity: 0.4; }
            50% { opacity: 1; }
        }

        /* ============================================
           COSMOS
           ============================================ */
        
        .cosmos {
            position: fixed;
            inset: 0;
            z-index: 0;
            overflow: hidden;
            pointer-events: none;
        }

        .cosmos-gradient {
            position: absolute;
            inset: 0;
            background: 
                radial-gradient(ellipse 80% 50% at 50% 0%, rgba(107, 45, 45, 0.12) 0%, transparent 50%),
                radial-gradient(ellipse 60% 40% at 20% 100%, rgba(201, 165, 92, 0.06) 0%, transparent 40%),
                var(--bg-void);
        }

        .star {
            position: absolute;
            background: #ffefd5;
            border-radius: 50%;
            animation: twinkle var(--d, 4s) ease-in-out infinite;
            animation-delay: var(--t, 0s);
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.2; transform: scale(1); }
            50% { opacity: 0.8; transform: scale(1.3); }
        }

        /* ============================================
           INTRO
           ============================================ */
        
        .intro {
            position: fixed;
            inset: 0;
            z-index: 1000;
            background: var(--bg-void);
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            visibility: hidden;
            transition: opacity 1s ease, visibility 1s ease;
        }

        .intro.show {
            opacity: 1;
            visibility: visible;
        }

        .intro.hidden {
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
        }

        .intro-container {
            width: 100%;
            max-width: 360px;
            padding: 2rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .intro-steps {
            position: relative;
            width: 100%;
            min-height: 280px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .intro-step {
            position: absolute;
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            opacity: 0;
            transform: translateY(25px);
            transition: opacity 0.8s ease, transform 0.8s ease;
            pointer-events: none;
        }

        .intro-step.active {
            opacity: 1;
            transform: translateY(0);
            pointer-events: auto;
        }

        .intro-step.done {
            opacity: 0;
            transform: translateY(-25px);
        }

        .step-arabic {
            font-family: 'Amiri', serif;
            font-size: 2.8rem;
            color: var(--gold);
            margin-bottom: 1rem;
            direction: rtl;
        }

        .step-meaning {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.1rem;
            color: var(--text-muted);
            font-style: italic;
        }

        .step-question {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.3rem;
            color: var(--cream);
            font-style: italic;
            line-height: 2.2;
        }

        .step-answer {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.2rem;
            color: var(--gold-light);
            line-height: 2.2;
        }

        .step-answer .hl {
            color: var(--rose-light);
            display: block;
            margin-top: 0.5rem;
        }

        .step-dates {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1.25rem;
        }

        .date-block {
            text-align: center;
        }

        .date-label {
            font-size: 0.65rem;
            letter-spacing: 0.2em;
            text-transform: uppercase;
            color: var(--text-dim);
            margin-bottom: 0.4rem;
        }

        .date-value {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.5rem;
            color: var(--gold);
        }

        .date-connector {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .connector-line {
            width: 30px;
            height: 1px;
            background: var(--gold-dark);
        }

        .connector-dot {
            width: 8px;
            height: 8px;
            background: var(--rose);
            border-radius: 50%;
        }

        .date-fate {
            font-family: 'Amiri', serif;
            font-size: 1rem;
            color: var(--rose-light);
            margin-top: 0.75rem;
            direction: rtl;
        }

        .step-name {
            margin-bottom: 2rem;
        }

        .name-label {
            font-size: 0.7rem;
            letter-spacing: 0.25em;
            text-transform: uppercase;
            color: var(--text-dim);
            margin-bottom: 1rem;
        }

        .name-main {
            font-family: 'Cormorant Garamond', serif;
            font-size: 4rem;
            font-weight: 500;
            color: var(--cream);
            line-height: 1;
            margin-bottom: 0.5rem;
        }

        .name-arabic {
            font-family: 'Amiri', serif;
            font-size: 1.8rem;
            color: var(--gold);
            direction: rtl;
        }

        .intro-enter {
            padding: 1rem 3rem;
            background: transparent;
            border: 1px solid var(--gold);
            border-radius: 3rem;
            color: var(--gold);
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.1rem;
            letter-spacing: 0.15em;
            cursor: pointer;
            opacity: 0;
            transform: translateY(15px);
            transition: all 0.5s ease;
        }

        .intro-enter.show {
            opacity: 1;
            transform: translateY(0);
        }

        .intro-enter:active {
            background: var(--gold);
            color: var(--bg-void);
            transform: scale(0.96);
        }

        /* ============================================
           LANGUAGE TOGGLE
           ============================================ */

        .lang-toggle {
            position: fixed;
            top: calc(1rem + var(--safe-top));
            right: 1rem;
            z-index: 500;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.6rem 1rem;
            background: var(--bg-glass);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(201, 165, 92, 0.2);
            border-radius: 2rem;
            cursor: pointer;
            opacity: 0;
            transform: translateY(-10px);
            transition: all 0.5s ease;
        }

        .lang-toggle.show {
            opacity: 1;
            transform: translateY(0);
        }

        .lang-toggle svg {
            width: 16px;
            height: 16px;
            stroke: var(--gold);
            stroke-width: 1.5;
            fill: none;
        }

        .lang-toggle span {
            font-size: 0.75rem;
            color: var(--gold);
            font-weight: 500;
        }

        /* ============================================
           AMBIENT MUSIC INDICATOR
           ============================================ */

        .ambient-indicator {
            position: fixed;
            top: calc(1rem + var(--safe-top));
            left: 1rem;
            z-index: 500;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.6rem 1rem;
            background: var(--bg-glass);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(201, 165, 92, 0.2);
            border-radius: 2rem;
            cursor: pointer;
            opacity: 0;
            transform: translateY(-10px);
            transition: all 0.5s ease;
        }

        .ambient-indicator.show {
            opacity: 1;
            transform: translateY(0);
        }

        .ambient-bars {
            display: flex;
            align-items: center;
            gap: 2px;
            height: 14px;
        }

        .ambient-bar {
            width: 2px;
            background: var(--gold);
            border-radius: 1px;
            transition: height 0.2s ease;
        }

        .ambient-indicator.playing .ambient-bar {
            animation: ambientAnim 0.8s ease-in-out infinite;
        }

        .ambient-bar:nth-child(1) { height: 4px; animation-delay: 0s; }
        .ambient-bar:nth-child(2) { height: 8px; animation-delay: 0.1s; }
        .ambient-bar:nth-child(3) { height: 12px; animation-delay: 0.2s; }
        .ambient-bar:nth-child(4) { height: 6px; animation-delay: 0.3s; }

        .ambient-indicator:not(.playing) .ambient-bar {
            height: 3px !important;
            opacity: 0.4;
        }

        @keyframes ambientAnim {
            0%, 100% { height: 4px; }
            50% { height: 12px; }
        }

        .ambient-indicator span {
            font-size: 0.65rem;
            color: var(--gold);
            letter-spacing: 0.05em;
        }

        /* ============================================
           MAIN
           ============================================ */

        .main {
            position: relative;
            z-index: 1;
            opacity: 0;
            transform: translateY(30px);
            transition: all 1s ease;
            padding-bottom: calc(80px + var(--safe-bottom));
        }

        .main.show {
            opacity: 1;
            transform: translateY(0);
        }

        .section-wrap {
            padding: 0 1.5rem;
            max-width: 480px;
            margin: 0 auto;
        }

        /* ============================================
           HERO
           ============================================ */

        .hero {
            min-height: 100vh;
            min-height: 100svh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: calc(var(--safe-top) + 3rem) 1.5rem 4rem;
            position: relative;
        }

        .hero-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: rgba(107, 45, 45, 0.2);
            border: 1px solid rgba(176, 120, 120, 0.25);
            border-radius: 2rem;
            margin-bottom: 2rem;
        }

        .hero-badge svg {
            width: 14px;
            height: 14px;
            fill: var(--rose);
        }

        .hero-badge span {
            font-size: 0.7rem;
            font-weight: 600;
            color: var(--rose-light);
            letter-spacing: 0.1em;
            text-transform: uppercase;
        }

        .hero-date {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.1rem;
            color: var(--gold);
            margin-bottom: 0.5rem;
        }

        .hero-title-ar {
            font-family: 'Amiri', serif;
            font-size: 2rem;
            color: var(--gold);
            direction: rtl;
            margin-bottom: 0.5rem;
        }

        .hero-name {
            font-family: 'Cormorant Garamond', serif;
            font-size: 3.5rem;
            font-weight: 500;
            color: var(--cream);
            line-height: 1;
            margin-bottom: 0.25rem;
        }

        .hero-subtitle {
            font-family: 'Amiri', serif;
            font-size: 1.3rem;
            color: var(--gold-light);
            margin-bottom: 2.5rem;
        }

        .hero-message {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.1rem;
            font-style: italic;
            line-height: 2;
            color: var(--cream);
            max-width: 300px;
        }

        .hero-scroll {
            position: absolute;
            bottom: 2.5rem;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.4rem;
            animation: scrollPulse 3s ease-in-out infinite;
        }

        .hero-scroll span {
            font-size: 0.6rem;
            letter-spacing: 0.2em;
            text-transform: uppercase;
            color: var(--text-dim);
        }

        .hero-scroll svg {
            width: 16px;
            height: 16px;
            stroke: var(--text-dim);
            stroke-width: 1.5;
            fill: none;
        }

        @keyframes scrollPulse {
            0%, 100% { opacity: 0.4; transform: translateX(-50%) translateY(0); }
            50% { opacity: 0.7; transform: translateX(-50%) translateY(6px); }
        }

        /* ============================================
           SECTION HEADER
           ============================================ */

        .section-header {
            text-align: center;
            margin-bottom: 2.5rem;
            padding-top: 5rem;
        }

        .section-ornament {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 1.25rem;
        }

        .ornament-line {
            width: 40px;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--gold-dark));
        }

        .ornament-line:last-child {
            background: linear-gradient(90deg, var(--gold-dark), transparent);
        }

        .ornament-diamond {
            width: 7px;
            height: 7px;
            background: var(--gold);
            transform: rotate(45deg);
        }

        .section-title-ar {
            font-family: 'Amiri', serif;
            font-size: 1.1rem;
            color: var(--gold);
            direction: rtl;
            margin-bottom: 0.5rem;
        }

        .section-title {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.7rem;
            font-weight: 500;
            color: var(--cream);
            margin-bottom: 0.5rem;
        }

        .section-subtitle {
            font-size: 0.9rem;
            color: var(--text-muted);
            font-style: italic;
        }

        /* ============================================
           TIMELINE EXPANDIDA
           ============================================ */

        .timeline {
            position: relative;
            padding-left: 2.5rem;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 10px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: linear-gradient(180deg,
                transparent 0%,
                var(--gold-dark) 2%,
                var(--wine) 50%,
                var(--gold-dark) 98%,
                transparent 100%
            );
        }

        .timeline-item {
            position: relative;
            padding-bottom: 2.5rem;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.6s ease;
        }

        .timeline-item.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .timeline-item:last-child {
            padding-bottom: 0;
        }

        .timeline-marker {
            position: absolute;
            left: -2.5rem;
            top: 4px;
            width: 22px;
            height: 22px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .timeline-marker::before {
            content: '';
            width: 10px;
            height: 10px;
            background: var(--bg-deep);
            border: 2px solid var(--gold-dark);
            border-radius: 50%;
        }

        .timeline-item.special .timeline-marker::before {
            width: 12px;
            height: 12px;
            background: var(--wine);
            border-color: var(--rose);
            box-shadow: 0 0 15px var(--wine-glow);
        }

        .timeline-item.today .timeline-marker::before {
            width: 14px;
            height: 14px;
            background: var(--gold);
            border-color: var(--gold-light);
            box-shadow: 0 0 20px var(--gold-glow);
            animation: glowPulse 2s ease-in-out infinite;
        }

        @keyframes glowPulse {
            0%, 100% { box-shadow: 0 0 15px var(--gold-glow); }
            50% { box-shadow: 0 0 30px var(--gold-glow); }
        }

        .timeline-date {
            font-size: 0.65rem;
            font-weight: 600;
            letter-spacing: 0.12em;
            text-transform: uppercase;
            color: var(--gold);
            margin-bottom: 0.4rem;
        }

        .timeline-title {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.15rem;
            font-weight: 500;
            color: var(--cream);
            margin-bottom: 0.5rem;
        }

        .timeline-text {
            font-size: 0.95rem;
            line-height: 1.8;
            color: var(--text-muted);
        }

        .timeline-quote {
            margin-top: 1rem;
            padding: 1rem 1.25rem;
            background: rgba(201, 165, 92, 0.04);
            border-left: 2px solid var(--wine);
            border-radius: 0 0.75rem 0.75rem 0;
        }

        .timeline-quote-text {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1rem;
            font-style: italic;
            color: var(--gold-light);
        }

        /* ============================================
           LETTER
           ============================================ */

        .letter-section {
            margin-top: 4rem;
        }

        .letter-container {
            background: linear-gradient(165deg,
                rgba(107, 45, 45, 0.1) 0%,
                rgba(13, 17, 23, 0.98) 35%,
                rgba(201, 165, 92, 0.03) 100%
            );
            border: 1px solid rgba(201, 165, 92, 0.12);
            border-radius: 1.5rem;
            padding: 2.5rem 1.75rem;
            position: relative;
        }

        .letter-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg,
                transparent 5%,
                var(--gold-dark) 20%,
                var(--gold) 50%,
                var(--gold-dark) 80%,
                transparent 95%
            );
        }

        .letter-salutation {
            font-family: 'Amiri', serif;
            font-size: 1.4rem;
            color: var(--gold);
            margin-bottom: 2rem;
            direction: rtl;
            text-align: right;
        }

        .letter-body {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.05rem;
            line-height: 2.1;
            color: var(--cream);
        }

        .letter-body p {
            margin-bottom: 1.5rem;
            text-align: justify;
        }

        .letter-body .hl {
            color: var(--gold);
            font-weight: 500;
        }

        .letter-body .hl-rose {
            color: var(--rose-light);
        }

        .letter-body .hl-rif {
            font-family: 'Amiri', serif;
            color: var(--gold-light);
        }

        .letter-divider {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1rem;
            margin: 2rem 0;
        }

        .letter-divider span {
            width: 4px;
            height: 4px;
            background: var(--gold-dark);
            border-radius: 50%;
        }

        .letter-divider span:nth-child(2) {
            width: 6px;
            height: 6px;
            background: var(--wine);
        }

        .letter-closing {
            margin-top: 2.5rem;
            padding-top: 2rem;
            border-top: 1px solid rgba(201, 165, 92, 0.1);
            text-align: center;
        }

        .letter-closing-ar {
            font-family: 'Amiri', serif;
            font-size: 1.3rem;
            color: var(--gold);
            direction: rtl;
            margin-bottom: 0.75rem;
        }

        .letter-closing-text {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1rem;
            color: var(--rose-light);
            font-style: italic;
        }

        .letter-signature {
            margin-top: 1.5rem;
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.2rem;
            color: var(--cream);
        }

        /* ============================================
           PLAYER - REDISEÑADO
           ============================================ */

        .player-section {
            margin-top: 4rem;
        }

        .player-container {
            background: linear-gradient(145deg,
                var(--bg-card) 0%,
                rgba(107, 45, 45, 0.1) 100%
            );
            border: 1px solid rgba(201, 165, 92, 0.15);
            border-radius: 1.5rem;
            padding: 2rem 1.5rem;
        }

        .player-header {
            text-align: center;
            margin-bottom: 2rem;
        }

        /* NUEVO ICONO DE CANCIÓN */
        .player-icon-wrap {
            width: 80px;
            height: 80px;
            margin: 0 auto 1.25rem;
            position: relative;
        }

        .player-vinyl {
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 50%, #1a1a1a 100%);
            border-radius: 50%;
            position: relative;
            box-shadow: 
                0 4px 20px rgba(0,0,0,0.4),
                inset 0 0 0 2px rgba(255,255,255,0.05);
            animation: vinylSpin 8s linear infinite;
            animation-play-state: paused;
        }

        .player-vinyl.spinning {
            animation-play-state: running;
        }

        @keyframes vinylSpin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .player-vinyl::before {
            content: '';
            position: absolute;
            inset: 8px;
            border-radius: 50%;
            background: repeating-radial-gradient(
                circle at center,
                transparent 0px,
                transparent 2px,
                rgba(255,255,255,0.03) 2px,
                rgba(255,255,255,0.03) 3px
            );
        }

        .player-vinyl::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 24px;
            height: 24px;
            background: linear-gradient(135deg, var(--wine) 0%, var(--wine-deep) 100%);
            border-radius: 50%;
            box-shadow: 
                0 0 0 3px var(--gold-dark),
                0 0 15px var(--wine-glow);
        }

        .player-vinyl-label {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1;
        }

        .player-vinyl-label svg {
            width: 12px;
            height: 12px;
            fill: var(--gold);
        }

        .player-glow {
            position: absolute;
            inset: -10px;
            background: radial-gradient(circle, var(--wine-glow) 0%, transparent 70%);
            border-radius: 50%;
            opacity: 0.5;
            animation: glowPulse 3s ease-in-out infinite;
        }

        .player-title {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.5rem;
            color: var(--cream);
            margin-bottom: 0.25rem;
        }

        .player-subtitle {
            font-size: 0.85rem;
            color: var(--text-muted);
            font-style: italic;
        }

        .progress-wrap {
            margin-bottom: 1.5rem;
        }

        .progress-bar {
            height: 4px;
            background: rgba(255, 255, 255, 0.08);
            border-radius: 2px;
            cursor: pointer;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--gold-dark), var(--gold));
            border-radius: 2px;
            width: 0%;
            transition: width 0.1s linear;
            position: relative;
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            right: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 10px;
            height: 10px;
            background: var(--gold);
            border-radius: 50%;
            box-shadow: 0 0 10px var(--gold-glow);
        }

        .progress-times {
            display: flex;
            justify-content: space-between;
            margin-top: 0.6rem;
            font-size: 0.7rem;
            color: var(--text-dim);
            font-variant-numeric: tabular-nums;
        }

        .control-btns {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1.5rem;
        }

        .ctrl-btn {
            width: 44px;
            height: 44px;
            background: transparent;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.2s ease;
        }

        .ctrl-btn:active {
            transform: scale(0.9);
        }

        .ctrl-btn svg {
            width: 20px;
            height: 20px;
            stroke: var(--text-muted);
            stroke-width: 2;
            fill: none;
        }

        .play-btn {
            width: 72px;
            height: 72px;
            background: linear-gradient(135deg, var(--gold) 0%, var(--gold-dark) 100%);
            border-radius: 50%;
            box-shadow: 0 6px 30px var(--gold-glow);
            transition: all 0.3s ease;
        }

        .play-btn:active {
            transform: scale(0.95);
            box-shadow: 0 4px 20px var(--gold-glow);
        }

        .play-btn svg {
            width: 28px;
            height: 28px;
            stroke: var(--bg-void);
            fill: var(--bg-void);
            margin-left: 3px;
        }

        .play-btn.playing svg {
            margin-left: 0;
        }

        .download-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            margin-top: 1.5rem;
            padding: 1rem 1.5rem;
            background: rgba(201, 165, 92, 0.08);
            border: 1px solid rgba(201, 165, 92, 0.25);
            border-radius: 2rem;
            color: var(--gold);
            font-size: 0.9rem;
            font-weight: 500;
            cursor: pointer;
            width: 100%;
            transition: all 0.3s ease;
        }

        .download-btn:active {
            background: rgba(201, 165, 92, 0.15);
            transform: scale(0.98);
        }

        .download-btn svg {
            width: 18px;
            height: 18px;
            stroke: var(--gold);
            stroke-width: 2;
            fill: none;
        }

        audio {
            display: none;
        }

        /* Lyrics */
        .lyrics-section {
            margin-top: 2.5rem;
        }

        .lyrics-toggle {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.6rem;
            padding: 1rem;
            background: transparent;
            border: 1px solid rgba(201, 165, 92, 0.15);
            border-radius: 1rem;
            color: var(--gold);
            font-family: 'Cormorant Garamond', serif;
            font-size: 1rem;
            cursor: pointer;
            width: 100%;
        }

        .lyrics-toggle svg {
            width: 16px;
            height: 16px;
            stroke: var(--gold);
            stroke-width: 2;
            fill: none;
            transition: transform 0.4s ease;
        }

        .lyrics-toggle.open svg {
            transform: rotate(180deg);
        }

        .lyrics-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease;
        }

        .lyrics-content.open {
            max-height: 2500px;
        }

        .lyrics-inner {
            padding: 2rem 0;
        }

        .lyrics-verse {
            margin-bottom: 2rem;
        }

        .verse-label {
            font-size: 0.6rem;
            letter-spacing: 0.2em;
            text-transform: uppercase;
            color: var(--gold-dark);
            margin-bottom: 0.75rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .verse-label::after {
            content: '';
            flex: 1;
            height: 1px;
            background: linear-gradient(90deg, var(--gold-dark), transparent);
        }

        .lyrics-line {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1rem;
            line-height: 2.2;
            color: var(--cream);
        }

        .lyrics-line.hl {
            color: var(--gold);
        }

        .lyrics-line.em {
            color: var(--rose-light);
            font-style: italic;
        }

        /* ============================================
           WISHES - 6 cards
           ============================================ */

        .wishes-section {
            margin-top: 4rem;
        }

        .wishes-grid {
            display: grid;
            gap: 1rem;
        }

        .wish-card {
            background: linear-gradient(135deg,
                rgba(107, 45, 45, 0.08) 0%,
                rgba(13, 17, 23, 0.95) 100%
            );
            border: 1px solid rgba(201, 165, 92, 0.1);
            border-radius: 1.25rem;
            padding: 1.5rem;
            opacity: 0;
            transform: translateY(15px);
            transition: all 0.5s ease;
        }

        .wish-card.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .wish-icon {
            width: 40px;
            height: 40px;
            margin-bottom: 0.75rem;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(201, 165, 92, 0.1);
            border-radius: 50%;
        }

        .wish-icon svg {
            width: 20px;
            height: 20px;
            stroke: var(--gold);
            stroke-width: 1.5;
            fill: none;
        }

        .wish-title {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.15rem;
            color: var(--cream);
            margin-bottom: 0.4rem;
        }

        .wish-text {
            font-size: 0.9rem;
            line-height: 1.7;
            color: var(--text-muted);
        }

        /* ============================================
           FINAL
           ============================================ */

        .final-section {
            margin-top: 4rem;
            text-align: center;
            padding: 3rem 1.5rem;
            background: linear-gradient(180deg, 
                transparent 0%, 
                rgba(107, 45, 45, 0.08) 50%, 
                transparent 100%
            );
        }

        .final-ar {
            font-family: 'Amiri', serif;
            font-size: 1.8rem;
            color: var(--gold);
            direction: rtl;
            margin-bottom: 1rem;
        }

        .final-text {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.15rem;
            color: var(--cream);
            font-style: italic;
            line-height: 2;
            margin-bottom: 1.5rem;
        }

        .final-signature {
            font-size: 0.9rem;
            color: var(--text-muted);
        }

        .final-signature strong {
            color: var(--rose-light);
        }

        .final-hearts {
            margin-top: 2rem;
            display: flex;
            justify-content: center;
            gap: 0.4rem;
        }

        .final-heart {
            width: 24px;
            height: 24px;
            fill: var(--rose);
            animation: heartBeat 1.5s ease-in-out infinite;
        }

        .final-heart:nth-child(2) { animation-delay: 0.15s; }
        .final-heart:nth-child(3) { animation-delay: 0.3s; }

        @keyframes heartBeat {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.15); }
        }

        /* Transitions */
        .translatable {
            transition: opacity 0.4s ease;
        }

        .translatable.switching {
            opacity: 0;
        }

        /* Scrollbar */
        body::-webkit-scrollbar { display: none; }
        body { -ms-overflow-style: none; scrollbar-width: none; }

        ::selection {
            background: rgba(201, 165, 92, 0.3);
            color: var(--cream);
        }
    </style>
<script src="https://puc.poecdn.net/authenticated_preview_page/syncedState.3f7572448765332f3047.js"></script></head>
<body>
    <!-- VOLUME SCREEN -->
    <div class="volume-screen" id="volumeScreen">
        <div class="volume-icon">
            <svg viewBox="0 0 24 24">
                <path d="M11 5L6 9H2v6h4l5 4V5z"></path>
                <path d="M15.54 8.46a5 5 0 0 1 0 7.07"></path>
                <path d="M19.07 4.93a10 10 0 0 1 0 14.14"></path>
            </svg>
            <div class="volume-waves">
                <div class="volume-wave"></div>
                <div class="volume-wave"></div>
                <div class="volume-wave"></div>
            </div>
        </div>
        <div class="volume-text">
            <div class="volume-title">Sube el volumen</div>
            <div class="volume-subtitle">Para una mejor experiencia</div>
        </div>
        <div class="volume-tap">Toca para continuar</div>
    </div>

    <!-- Cosmos -->
    <div class="cosmos" id="cosmos">
        <div class="cosmos-gradient"></div>
    </div>

    <!-- INTRO -->
    <div class="intro" id="intro">
        <div class="intro-container">
            <div class="intro-steps">
                <div class="intro-step" data-step="1">
                    <div class="step-arabic">مكتوب</div>
                    <div class="step-meaning">Lo que está escrito, está escrito</div>
                </div>

                <div class="intro-step" data-step="2">
                    <div class="step-question">
                        ¿Cómo puede alguien<br>
                        extrañar a quien<br>
                        aún no ha conocido?
                    </div>
                </div>

                <div class="intro-step" data-step="3">
                    <div class="step-answer">
                        Porque el alma reconoce<br>
                        lo que el tiempo<br>
                        <span class="hl">aún no ha revelado</span>
                    </div>
                </div>

                <div class="intro-step" data-step="4">
                    <div class="step-dates">
                        <div class="date-block">
                            <div class="date-label">Él nació el</div>
                            <div class="date-value">7 de Noviembre</div>
                        </div>
                        <div class="date-connector">
                            <span class="connector-line"></span>
                            <span class="connector-dot"></span>
                            <span class="connector-line"></span>
                        </div>
                        <div class="date-block">
                            <div class="date-label">Ella nació el</div>
                            <div class="date-value">7 de Diciembre</div>
                        </div>
                        <div class="date-fate">السبعة — رقم القدر</div>
                    </div>
                </div>

                <div class="intro-step" data-step="5">
                    <div class="step-name">
                        <div class="name-label">Para ti</div>
                        <div class="name-main">Fátima</div>
                        <div class="name-arabic">فاطمة إنو</div>
                    </div>
                    <button class="intro-enter" id="introEnter">Adkhal</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Ambient Indicator -->
    <button class="ambient-indicator" id="ambientIndicator">
        <div class="ambient-bars">
            <div class="ambient-bar"></div>
            <div class="ambient-bar"></div>
            <div class="ambient-bar"></div>
            <div class="ambient-bar"></div>
        </div>
        <span>Ambiente</span>
    </button>

    <!-- Language Toggle -->
    <button class="lang-toggle" id="langToggle">
        <svg viewBox="0 0 24 24">
            <circle cx="12" cy="12" r="10"></circle>
            <path d="M2 12h20M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path>
        </svg>
        <span id="langText">العربية</span>
    </button>

    <!-- AUDIO FILES -->
    <audio id="ambientAudio" loop="" preload="auto">
        <source src="ambiente.mp3" type="audio/mpeg">
    </audio>
    
    <audio id="mainAudio" preload="metadata">
        <source src="cancion_f.mp3" type="audio/mpeg">
    </audio>

    <!-- Main -->
    <main class="main" id="main">
        
        <!-- Hero -->
        <section class="hero">
            <div class="hero-badge">
                <svg viewBox="0 0 24 24"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"></path></svg>
                <span class="translatable" data-es="Thaddath Inu" data-ar="ثدّث إنو">Thaddath Inu</span>
            </div>

            <div class="hero-date translatable" data-es="7 de Diciembre, 2025" data-ar="٧ دجنبر ٢٠٢٥">7 de Diciembre, 2025</div>
            <h1 class="hero-title-ar">عيد ميلاد سعيد</h1>
            <div class="hero-name">Fátima</div>
            <div class="hero-subtitle translatable" data-es="Zin inu" data-ar="زين إنو">Zin inu</div>

            <p class="hero-message translatable" data-es="25 años de luz. Y yo tengo la fortuna de que esa luz haya decidido brillar hacia mí." data-ar="٢٥ عام ديال النور. وأنا عندي الحظ بلي داك النور قرر يضوي عليا.">
                25 años de luz. Y yo tengo la fortuna de que esa luz haya decidido brillar hacia mí.
            </p>

            <div class="hero-scroll">
                <span class="translatable" data-es="Nuestra historia" data-ar="قصتنا">Nuestra historia</span>
                <svg viewBox="0 0 24 24"><path d="M12 5v14M19 12l-7 7-7-7"></path></svg>
            </div>
        </section>

        <!-- Timeline Expandida -->
        <section class="timeline-section section-wrap">
            <header class="section-header">
                <div class="section-ornament">
                    <span class="ornament-line"></span>
                    <span class="ornament-diamond"></span>
                    <span class="ornament-line"></span>
                </div>
                <div class="section-title-ar">قصتنا</div>
                <h2 class="section-title translatable" data-es="Nuestra Historia" data-ar="قصة حبنا">Nuestra Historia</h2>
                <p class="section-subtitle translatable" data-es="42 días que cambiaron todo" data-ar="٤٢ يوم اللي بدلو كلشي">42 días que cambiaron todo</p>
            </header>

            <div class="timeline">
                <article class="timeline-item">
                    <div class="timeline-marker"></div>
                    <div class="timeline-date">27 Octubre 2025</div>
                    <h3 class="timeline-title translatable" data-es="El primer mensaje" data-ar="أول رسالة">El primer mensaje</h3>
                    <p class="timeline-text translatable" data-es="Un simple 'hola' que abrió un universo entero. Algo en mi corazón ya sabía que ese mensaje cambiaría todo." data-ar="سلام بسيط اللي فتح عالم كامل. شي حاجة ف قلبي كانت عارفة بلي داك الميساج غادي يبدل كلشي.">
                        Un simple "hola" que abrió un universo entero. Algo en mi corazón ya sabía que ese mensaje cambiaría todo.
                    </p>
                </article>

                <article class="timeline-item">
                    <div class="timeline-marker"></div>
                    <div class="timeline-date">30 Octubre 2025</div>
                    <h3 class="timeline-title translatable" data-es="La primera llamada" data-ar="أول مكالمة">La primera llamada</h3>
                    <p class="timeline-text translatable" data-es="Escuché tu voz por primera vez. Y en ese momento supe que quería escucharla cada día de mi vida." data-ar="سمعت صوتك لأول مرة. وف داك اللحظة عرفت بلي بغيت نسمعو كل يوم ف حياتي.">
                        Escuché tu voz por primera vez. Y en ese momento supe que quería escucharla cada día de mi vida.
                    </p>
                </article>

                <article class="timeline-item special">
                    <div class="timeline-marker"></div>
                    <div class="timeline-date">3 Noviembre 2025</div>
                    <h3 class="timeline-title translatable" data-es="«No me dejes sola»" data-ar="«ما تخلينيش بوحدي»">«No me dejes sola»</h3>
                    <p class="timeline-text translatable" data-es="Cinco palabras que sellaron mi destino. Me pediste que me quedara, y en ese instante decidí que nunca me iría." data-ar="خمس كلمات اللي سدّو المصير ديالي. طلبتي مني نبقى، وف داك اللحظة قررت عمري ما نمشي.">
                        Cinco palabras que sellaron mi destino. Me pediste que me quedara, y en ese instante decidí que nunca me iría.
                    </p>
                    <div class="timeline-quote">
                        <p class="timeline-quote-text">"Cuando alguien te pide que te quedes, con el corazón, no con palabras... eso es amor."</p>
                    </div>
                </article>

                <article class="timeline-item">
                    <div class="timeline-marker"></div>
                    <div class="timeline-date">7 Noviembre 2025</div>
                    <h3 class="timeline-title translatable" data-es="Mi cumpleaños contigo" data-ar="عيد ميلادي معاك">Mi cumpleaños contigo</h3>
                    <p class="timeline-text translatable" data-es="El mejor regalo no fue nada material. Fue saber que existías, que estabas ahí, que eras real." data-ar="أحسن هدية ما كانتش ماديّة. كانت أنني عرفت بلي كنتي موجودة، كنتي تما، كنتي حقيقية.">
                        El mejor regalo no fue nada material. Fue saber que existías, que estabas ahí, que eras real.
                    </p>
                </article>

                <article class="timeline-item special">
                    <div class="timeline-marker"></div>
                    <div class="timeline-date">11 Noviembre 2025</div>
                    <h3 class="timeline-title translatable" data-es="«Mi primera y última decisión»" data-ar="«قراري الأول والأخير»">«Mi primera y última decisión»</h3>
                    <p class="timeline-text translatable" data-es="El día que el Yaqin se hizo palabra. Sin dudas, sin vueltas atrás. Tú eres mi primera y última elección." data-ar="النهار اللي اليقين ولى كلام. بلا شك، بلا رجوع. نتي الاختيار الأول والأخير ديالي.">
                        El día que el Yaqin se hizo palabra. Sin dudas, sin vueltas atrás. Tú eres mi primera y última elección.
                    </p>
                </article>

                <article class="timeline-item">
                    <div class="timeline-marker"></div>
                    <div class="timeline-date">20 Noviembre 2025</div>
                    <h3 class="timeline-title translatable" data-es="Planes de futuro" data-ar="خطط المستقبل">Planes de futuro</h3>
                    <p class="timeline-text translatable" data-es="Empezamos a soñar juntos. Una casa, una vida, un nosotros. Ya no hablamos de 'yo' ni de 'tú'. Solo de 'nosotros'." data-ar="بدينا نحلمو مع بعض. دار، حياة، حنا. ما بقيناش نهضرو على 'أنا' ولا 'نتي'. غير على 'حنا'.">
                        Empezamos a soñar juntos. Una casa, una vida, un nosotros. Ya no hablamos de "yo" ni de "tú". Solo de "nosotros".
                    </p>
                </article>

                <article class="timeline-item today">
                    <div class="timeline-marker"></div>
                    <div class="timeline-date">7 Diciembre 2025</div>
                    <h3 class="timeline-title translatable" data-es="Hoy: Tu día" data-ar="اليوم: يومك نتي">Hoy: Tu día</h3>
                    <p class="timeline-text translatable" data-es="25 años de ti existiendo en este mundo. Y todo un futuro esperándonos. Juntos." data-ar="٢٥ عام ديالك ف هاد الدنيا. ومستقبل كامل كيتسناناّ. مع بعض.">
                        25 años de ti existiendo en este mundo. Y todo un futuro esperándonos. Juntos.
                    </p>
                </article>
            </div>
        </section>

        <!-- CARTA MÁS ROMÁNTICA -->
        <section class="letter-section section-wrap">
            <header class="section-header">
                <div class="section-ornament">
                    <span class="ornament-line"></span>
                    <span class="ornament-diamond"></span>
                    <span class="ornament-line"></span>
                </div>
                <div class="section-title-ar">رسالة من القلب</div>
                <h2 class="section-title translatable" data-es="Lo que veo en ti" data-ar="اللي كنشوف فيك">Lo que veo en ti</h2>
            </header>

            <div class="letter-container">
                <div class="letter-salutation">يا فاطمة، روح ديالي...</div>

                <div class="letter-body">
                    <p class="translatable" data-es="Antes de conocerte, pensaba que sabía lo que buscaba. Tenía una lista mental de cualidades, de expectativas, de sueños. Pero llegaste tú y rompiste esa lista. No porque no la cumplieras, sino porque &lt;span class='hl'&gt;eres mucho más de lo que jamás pude imaginar&lt;/span&gt;." data-ar="قبل ما نعرفك، كنت كنظن عرفت شنو كنقلب عليه. كان عندي لائحة فراسي ديال الصفات، التوقعات، الأحلام. ولكن جيتي نتي وهرستي داك اللائحة. ماشي حيت ما عندكش داكشي، ولكن حيت &lt;span class='hl'&gt;نتي أكثر بزاف من كلشي اللي عمري تخيلت&lt;/span&gt;.">
                        Antes de conocerte, pensaba que sabía lo que buscaba. Tenía una lista mental de cualidades, de expectativas, de sueños. Pero llegaste tú y rompiste esa lista. No porque no la cumplieras, sino porque <span class="hl">eres mucho más de lo que jamás pude imaginar</span>.
                    </p>

                    <p class="translatable" data-es="Me enamoro de los pequeños detalles. De cómo te ríes cuando algo te hace verdadera gracia. De cómo tu voz cambia cuando estás cansada y solo quieres que te escuche. De cómo pronuncias mi nombre. &lt;span class='hl-rose'&gt;De cómo eres tú, sin filtros, sin máscaras&lt;/span&gt;." data-ar="كنتحماق على التفاصيل الصغيرة. على كيفاش كتضحكي ملي شي حاجة كتضحكك بصّح. على كيفاش الصوت ديالك كيتبدل ملي كتكوني عيانة وغير باغية شي حد يسمعك. على كيفاش كتنطقي اسميتي. &lt;span class='hl-rose'&gt;على كيفاش كتكوني نتي، بلا فيلتر، بلا ماسك&lt;/span&gt;.">
                        Me enamoro de los pequeños detalles. De cómo te ríes cuando algo te hace verdadera gracia. De cómo tu voz cambia cuando estás cansada y solo quieres que te escuche. De cómo pronuncias mi nombre. <span class="hl-rose">De cómo eres tú, sin filtros, sin máscaras</span>.
                    </p>

                    <p class="translatable" data-es="Eres &lt;span class='hl'&gt;fuerte&lt;/span&gt;. Tan fuerte que a veces olvido que también necesitas que alguien te sostenga. Pero yo estoy aquí para eso. Para los días en que la fuerza te falle. Para las noches en que el cansancio pese más que todo. Para ser tu refugio cuando el mundo sea demasiado." data-ar="نتي &lt;span class='hl'&gt;قوية&lt;/span&gt;. قوية بزاف حتى مرات كننسى بلي حتى نتي محتاجة شي حد يدعمك. ولكن أنا هنا لهادشي. للأيام اللي القوة تخونك. للليالي اللي التعب يثقل عليك أكثر من كلشي. باش نكون الملجأ ديالك ملي الدنيا تكون بزاف عليك.">
                        Eres <span class="hl">fuerte</span>. Tan fuerte que a veces olvido que también necesitas que alguien te sostenga. Pero yo estoy aquí para eso. Para los días en que la fuerza te falle. Para las noches en que el cansancio pese más que todo. Para ser tu refugio cuando el mundo sea demasiado.
                    </p>

                    <div class="letter-divider"><span></span><span></span><span></span></div>

                    <p class="translatable" data-es="Tengo que ser honesto contigo. &lt;span class='hl-rose'&gt;Tengo miedo&lt;/span&gt;. Miedo de no ser suficiente. Miedo de que la distancia pese demasiado. Miedo de fallarte de alguna forma que no puedo prever. Pero ese miedo no me paraliza. Me impulsa. Porque todo lo que vale la pena en esta vida viene con riesgo. Y tú vales cada riesgo, cada esfuerzo, cada latido." data-ar="خاصني نكون صادق معاك. &lt;span class='hl-rose'&gt;عندي الخوف&lt;/span&gt;. الخوف من أنني ما نكونش كافي. الخوف من المسافة تثقل بزاف. الخوف من أنني نخيب ظنك بشي طريقة ما نقدرش نتوقعها. ولكن داك الخوف ما كيشلنيش. كيدفعني. حيت كلشي اللي عندو قيمة ف هاد الحياة كيجي مع المخاطرة. ونتي كتسواي كل مخاطرة، كل مجهود، كل دقة ديال القلب.">
                        Tengo que ser honesto contigo. <span class="hl-rose">Tengo miedo</span>. Miedo de no ser suficiente. Miedo de que la distancia pese demasiado. Miedo de fallarte de alguna forma que no puedo prever. Pero ese miedo no me paraliza. Me impulsa. Porque todo lo que vale la pena en esta vida viene con riesgo. Y tú vales cada riesgo, cada esfuerzo, cada latido.
                    </p>

                    <p class="translatable" data-es="Cuando cierro los ojos, te veo. No solo como eres ahora, sino como serás. Te veo despertando a mi lado en nuestra casa, esa que construiremos juntos ladrillo a ladrillo, sueño a sueño. Te veo riéndote de mis chistes malos mientras cocinas. Te veo leyendo Corán con esa voz que me atraviesa el alma. Te veo siendo madre, enseñándoles a nuestros hijos a ser valientes como tú, a tener fe como tú." data-ar="ملي كنغمض عيني، كنشوفك. ماشي غير كيف داز، ولكن كيف غادي تكوني. كنشوفك كتفيقي حداي ف الدار ديالنا، داكشي اللي غادي نبنيوه مع بعض طوبة بطوبة، حلم بحلم. كنشوفك كتضحكي على النكت ديالي الخايبين وأنتي كتطيبي. كنشوفك كتقراي القرآن بداك الصوت اللي كيخترق الروح. كنشوفك أم، كتعلمي ولادنا يكونو شجعان بحالك، يكون عندهم إيمان بحالك.">
                        Cuando cierro los ojos, te veo. No solo como eres ahora, sino como serás. Te veo despertando a mi lado en nuestra casa, esa que construiremos juntos ladrillo a ladrillo, sueño a sueño. Te veo riéndote de mis chistes malos mientras cocinas. Te veo leyendo Corán con esa voz que me atraviesa el alma. Te veo siendo madre, enseñándoles a nuestros hijos a ser valientes como tú, a tener fe como tú.
                    </p>

                    <p class="translatable" data-es="Y yo, en esa visión, estoy a tu lado. &lt;span class='hl'&gt;Siempre a tu lado&lt;/span&gt;. Trabajando para que no te falte nada, pero sobre todo para que nunca te falte amor. Protegiéndote de lo que pueda, y sosteniendo tu mano cuando no pueda protegerte. Amándote de la única forma que sé: completamente, sin reservas, sin condiciones. &lt;span class='hl-rose'&gt;Como se ama cuando se sabe que es para siempre&lt;/span&gt;." data-ar="وأنا، ف داك الرؤية، حداك. &lt;span class='hl'&gt;ديما حداك&lt;/span&gt;. كنخدم باش ما يعوزك والو، ولكن فوق كلشي باش ما يعوزك الحب. كنحميك من اللي نقدر عليه، وكنمسك يدك ملي ما نقدرش نحميك. كنبغيك بالطريقة الوحيدة اللي كنعرفها: كاملة، بلا تحفظ، بلا شروط. &lt;span class='hl-rose'&gt;كيف كيبغي الواحد ملي كيعرف بلي للأبد&lt;/span&gt;.">
                        Y yo, en esa visión, estoy a tu lado. <span class="hl">Siempre a tu lado</span>. Trabajando para que no te falte nada, pero sobre todo para que nunca te falte amor. Protegiéndote de lo que pueda, y sosteniendo tu mano cuando no pueda protegerte. Amándote de la única forma que sé: completamente, sin reservas, sin condiciones. <span class="hl-rose">Como se ama cuando se sabe que es para siempre</span>.
                    </p>

                    <div class="letter-divider"><span></span><span></span><span></span></div>

                    <p class="translatable" data-es="Hoy cumples 25 años. Y sé que a veces miras atrás y sientes que hay cosas pendientes, sueños que parecen lejanos. Pero mírate, Fátima. &lt;span class='hl-rose'&gt;Mírate bien&lt;/span&gt;. Eres una mujer que ha superado más de lo que muchos saben. Una mujer con una fe que me inspira a ser mejor. Una mujer con un corazón tan grande que incluso siendo 'Lgakisa', cuidas de todos los que amas antes que de ti misma." data-ar="اليوم كملتي ٢٥ عام. وكنعرف بلي مرات كتشوفي للور وكتحسي بلي كاين حوايج ما كملتيهمش، أحلام اللي كتبان بعيدة. ولكن شوفي راسك، فاطمة. &lt;span class='hl-rose'&gt;شوفي راسك مزيان&lt;/span&gt;. نتي مرا تجاوزت أكثر مما بزاف ديال الناس عارفين. مرا عندها إيمان كيلهمني نولي أحسن. مرا عندها قلب كبير بزاف حتى واخا 'الڭاكيسة'، كتهتمي بكلشي اللي كتبغيهم قبل راسك.">
                        Hoy cumples 25 años. Y sé que a veces miras atrás y sientes que hay cosas pendientes, sueños que parecen lejanos. Pero mírate, Fátima. <span class="hl-rose">Mírate bien</span>. Eres una mujer que ha superado más de lo que muchos saben. Una mujer con una fe que me inspira a ser mejor. Una mujer con un corazón tan grande que incluso siendo "Lgakisa", cuidas de todos los que amas antes que de ti misma.
                    </p>

                    <p class="translatable" data-es="No te prometo un camino fácil. No te prometo que no habrá lágrimas, ni noches difíciles, ni momentos de duda. Pero te prometo que en cada tormenta, &lt;span class='hl'&gt;estaré ahí sosteniéndote&lt;/span&gt;. Te prometo que cada día trabajaré para ser el hombre que mereces. Te prometo que tu felicidad será mi misión, después de Allah." data-ar="ما غاديش نوعدك بطريق ساهلة. ما غاديش نوعدك بلي ما غاديش تكون الدموع، ولا الليالي الصعاب، ولا اللحظات ديال الشك. ولكن كنوعدك بلي ف كل عاصفة، &lt;span class='hl'&gt;غادي نكون تما كندعمك&lt;/span&gt;. كنوعدك بلي كل نهار غادي نخدم باش نكون الراجل اللي تستاهليه. كنوعدك بلي السعادة ديالك غادي تكون المهمة ديالي، من بعد الله.">
                        No te prometo un camino fácil. No te prometo que no habrá lágrimas, ni noches difíciles, ni momentos de duda. Pero te prometo que en cada tormenta, <span class="hl">estaré ahí sosteniéndote</span>. Te prometo que cada día trabajaré para ser el hombre que mereces. Te prometo que tu felicidad será mi misión, después de Allah.
                    </p>

                    <p class="translatable" data-es="Fátima, &lt;span class='hl-rif'&gt;Thaddath inu&lt;/span&gt;. No eres solo la mujer que quiero. Eres la mujer con la que quiero construir todo. La primera cara que quiero ver cada mañana. La última voz que quiero escuchar cada noche. La compañera de mi vida, de mi fe, de mis sueños. &lt;span class='hl-rose'&gt;La única. Para siempre la única&lt;/span&gt;." data-ar="فاطمة، &lt;span class='hl-rif'&gt;ثدّث إنو&lt;/span&gt;. ماشي غير المرا اللي بغيتها. نتي المرا اللي بغيت نبني معاها كلشي. أول وجه بغيت نشوفو كل صباح. آخر صوت بغيت نسمعو كل ليلة. الرفيقة ديال حياتي، ديال الإيمان ديالي، ديال الأحلام ديالي. &lt;span class='hl-rose'&gt;الوحيدة. للأبد الوحيدة&lt;/span&gt;.">
                        Fátima, <span class="hl-rif">Thaddath inu</span>. No eres solo la mujer que quiero. Eres la mujer con la que quiero construir todo. La primera cara que quiero ver cada mañana. La última voz que quiero escuchar cada noche. La compañera de mi vida, de mi fe, de mis sueños. <span class="hl-rose">La única. Para siempre la única</span>.
                    </p>
                </div>

                <div class="letter-closing">
                    <div class="letter-closing-ar">كنبغيك بلا حدود، من هنا للأبد</div>
                    <div class="letter-closing-text translatable" data-es="Te quiero sin límites, de aquí a la eternidad" data-ar="كنبغيك بلا حدود، من هنا للأبد">Te quiero sin límites, de aquí a la eternidad</div>
                    <div class="letter-signature">Youssef inu ♥</div>
                </div>
            </div>
        </section>

        <!-- Player -->
        <section class="player-section section-wrap">
            <header class="section-header">
                <div class="section-ornament">
                    <span class="ornament-line"></span>
                    <span class="ornament-diamond"></span>
                    <span class="ornament-line"></span>
                </div>
                <div class="section-title-ar">أغنيتك</div>
                <h2 class="section-title translatable" data-es="Tu Canción" data-ar="الأغنية ديالك">Tu Canción</h2>
            </header>

            <div class="player-container">
                <div class="player-header">
                    <div class="player-icon-wrap">
                        <div class="player-glow"></div>
                        <div class="player-vinyl" id="playerVinyl">
                            <div class="player-vinyl-label">
                                <svg viewBox="0 0 24 24"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"></path></svg>
                            </div>
                        </div>
                    </div>
                    <h3 class="player-title">Thaddath Inu</h3>
                    <p class="player-subtitle">Mektoub — Para Fátima</p>
                </div>

                <div class="progress-wrap">
                    <div class="progress-bar" id="progressBar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    <div class="progress-times">
                        <span id="currentTime">0:00</span>
                        <span id="duration">0:00</span>
                    </div>
                </div>

                <div class="control-btns">
                    <button class="ctrl-btn" id="rewindBtn">
                        <svg viewBox="0 0 24 24"><polygon points="11 19 2 12 11 5 11 19"></polygon><polygon points="22 19 13 12 22 5 22 19"></polygon></svg>
                    </button>
                    <button class="ctrl-btn play-btn" id="playBtn">
                        <svg viewBox="0 0 24 24" id="playIcon"><polygon points="5,3 19,12 5,21"></polygon></svg>
                    </button>
                    <button class="ctrl-btn" id="forwardBtn">
                        <svg viewBox="0 0 24 24"><polygon points="13 19 22 12 13 5 13 19"></polygon><polygon points="2 19 11 12 2 5 2 19"></polygon></svg>
                    </button>
                </div>

                <button class="download-btn" id="downloadBtn">
                    <svg viewBox="0 0 24 24"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg>
                    <span class="translatable" data-es="Descargar canción" data-ar="تحمّل الأغنية">Descargar canción</span>
                </button>
            </div>

            <!-- Lyrics -->
            <div class="lyrics-section">
                <button class="lyrics-toggle" id="lyricsToggle">
                    <span class="translatable" data-es="Ver letra" data-ar="الكلمات">Ver letra</span>
                    <svg viewBox="0 0 24 24"><polyline points="6 9 12 15 18 9"></polyline></svg>
                </button>

                <div class="lyrics-content" id="lyricsContent">
                    <div class="lyrics-inner">
                        <div class="lyrics-verse">
                            <div class="verse-label">Verso 1</div>
                            <p class="lyrics-line">Telt snin w ana kan-rassem wejhek f'khayali</p>
                            <p class="lyrics-line">Qbel ma n-choufek, kount 3aref belli nti d-yali</p>
                            <p class="lyrics-line">Rouh diali kanet kat-qalleb 3lik f'kull makan</p>
                            <p class="lyrics-line">Kunt kan-hass bik, qbel ma y-jma3na l-zman</p>
                            <p class="lyrics-line hl">Subhanallah, kifach rabi laqana</p>
                            <p class="lyrics-line">Machi sodfa, hadchi Mektoub sbeqna w jana</p>
                        </div>

                        <div class="lyrics-verse">
                            <div class="verse-label">Chorus</div>
                            <p class="lyrics-line hl">Ya Fatima, Takh-sagh chem bla qiyass</p>
                            <p class="lyrics-line hl">Ntiya Thaddath inu, ntiya l-assass</p>
                            <p class="lyrics-line">Mektoub 3liya n-bghik, w n-koun hdak</p>
                            <p class="lyrics-line">Hta law kan l-b3ad, ana dima m3ak</p>
                            <p class="lyrics-line em">Nti Rhana diali, nti nour l-3inin</p>
                        </div>

                        <div class="lyrics-verse">
                            <div class="verse-label">Bridge</div>
                            <p class="lyrics-line em">Chem d inu, nti diali...</p>
                            <p class="lyrics-line em">Nec d inam, ana dialek...</p>
                            <p class="lyrics-line hl">Bla chakk, bla rjou3.</p>
                            <p class="lyrics-line hl">Ilavda.</p>
                        </div>

                        <div class="lyrics-verse">
                            <div class="verse-label">Outro</div>
                            <p class="lyrics-line em">Nti kulchi...</p>
                            <p class="lyrics-line hl">Fatima...</p>
                            <p class="lyrics-line hl">Thaddath inu.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 6 Wishes -->
        <section class="wishes-section section-wrap">
            <header class="section-header">
                <div class="section-ornament">
                    <span class="ornament-line"></span>
                    <span class="ornament-diamond"></span>
                    <span class="ornament-line"></span>
                </div>
                <div class="section-title-ar">أمنياتي ليك</div>
                <h2 class="section-title translatable" data-es="Para este año" data-ar="لهاد العام">Para este año</h2>
            </header>

            <div class="wishes-grid">
                <article class="wish-card">
                    <div class="wish-icon">
                        <svg viewBox="0 0 24 24"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>
                    </div>
                    <h3 class="wish-title translatable" data-es="Salud" data-ar="الصحة">Salud</h3>
                    <p class="wish-text translatable" data-es="Que tu vitamina B suba, que la energía vuelva, que cada día te sientas más fuerte y llena de vida." data-ar="بلي الفيتامين B ديالك يطلع، بلي الطاقة ترجع، بلي كل نهار تحسي بالقوة ومليانة بالحياة.">
                        Que tu vitamina B suba, que la energía vuelva, que cada día te sientas más fuerte y llena de vida.
                    </p>
                </article>

                <article class="wish-card">
                    <div class="wish-icon">
                        <svg viewBox="0 0 24 24"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
                    </div>
                    <h3 class="wish-title translatable" data-es="Nuestro hogar" data-ar="الدار ديالنا">Nuestro hogar</h3>
                    <p class="wish-text translatable" data-es="Que pronto construyamos juntos ese Thaddath que soñamos. Nuestro lugar, nuestro refugio." data-ar="بلي قريب نبنيو مع بعض داك الثدّث اللي كنحلمو بيه. البلاصة ديالنا، الملجأ ديالنا.">
                        Que pronto construyamos juntos ese Thaddath que soñamos. Nuestro lugar, nuestro refugio.
                    </p>
                </article>

                <article class="wish-card">
                    <div class="wish-icon">
                        <svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>
                    </div>
                    <h3 class="wish-title translatable" data-es="El encuentro" data-ar="اللقاء">El encuentro</h3>
                    <p class="wish-text translatable" data-es="Que llegue pronto el día en que pueda mirarte a los ojos de verdad y decirte todo sin palabras." data-ar="بلي يجي بسرعة النهار اللي نقدر نشوف فيك ف العينين بالحقيقة ونقول ليك كلشي بلا كلام.">
                        Que llegue pronto el día en que pueda mirarte a los ojos de verdad y decirte todo sin palabras.
                    </p>
                </article>

                <article class="wish-card">
                    <div class="wish-icon">
                        <svg viewBox="0 0 24 24"><path d="M12 2L2 7l10 5 10-5-10-5z"></path><path d="M2 17l10 5 10-5"></path><path d="M2 12l10 5 10-5"></path></svg>
                    </div>
                    <h3 class="wish-title translatable" data-es="Paz interior" data-ar="السكينة">Paz interior</h3>
                    <p class="wish-text translatable" data-es="Que Allah llene tu corazón de sakina. Que encuentres paz en cada oración, en cada momento contigo misma." data-ar="بلي الله يعمر قلبك بالسكينة. بلي تلقاي الراحة ف كل صلاة، ف كل لحظة مع راسك.">
                        Que Allah llene tu corazón de sakina. Que encuentres paz en cada oración, en cada momento contigo misma.
                    </p>
                </article>

                <article class="wish-card">
                    <div class="wish-icon">
                        <svg viewBox="0 0 24 24"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>
                    </div>
                    <h3 class="wish-title translatable" data-es="Tus sueños" data-ar="الأحلام ديالك">Tus sueños</h3>
                    <p class="wish-text translatable" data-es="Que este año acerque todos tus sueños. Y que yo pueda estar a tu lado viéndolos cumplirse." data-ar="بلي هاد العام يقرّب كل الأحلام ديالك. وبلي نقدر نكون حداك كنشوفهم كيتحققو.">
                        Que este año acerque todos tus sueños. Y que yo pueda estar a tu lado viéndolos cumplirse.
                    </p>
                </article>

                <article class="wish-card">
                    <div class="wish-icon">
                        <svg viewBox="0 0 24 24"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>
                    </div>
                    <h3 class="wish-title translatable" data-es="Nuestra familia" data-ar="العائلة ديالنا">Nuestra familia</h3>
                    <p class="wish-text translatable" data-es="Que nuestras familias se unan en bendición. Que pronto podamos empezar a construir la nuestra." data-ar="بلي العائلات ديالنا يتلاقاو بالبركة. وبلي قريب نقدرو نبداو نبنيو ديالنا.">
                        Que nuestras familias se unan en bendición. Que pronto podamos empezar a construir la nuestra.
                    </p>
                </article>
            </div>
        </section>

        <!-- Final -->
        <section class="final-section">
            <div class="section-wrap">
                <div class="final-ar">عيد ميلاد سعيد يا حبيبتي</div>
                <p class="final-text translatable" data-es="Que Allah bendiga cada día de tu año 25. Y que me permita estar en cada uno de ellos, amándote más que el día anterior." data-ar="الله يبارك كل يوم من عامك ٢٥. ويخليني نكون معاك ف كل واحد فيهم، كنبغيك أكثر من اليوم اللي فات.">
                    Que Allah bendiga cada día de tu año 25. Y que me permita estar en cada uno de ellos, amándote más que el día anterior.
                </p>
                <p class="final-signature translatable" data-es="Con todo mi amor, &lt;strong&gt;Youssef&lt;/strong&gt;" data-ar="بكامل الحب ديالي، &lt;strong&gt;يوسف&lt;/strong&gt;">
                    Con todo mi amor, <strong>Youssef</strong>
                </p>
                <div class="final-hearts">
                    <svg class="final-heart" viewBox="0 0 24 24"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>
                    <svg class="final-heart" viewBox="0 0 24 24"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>
                    <svg class="final-heart" viewBox="0 0 24 24"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>
                </div>
            </div>
        </section>
    </main>

    <script>
    (function() {
        'use strict';

        // ============================================
        // STARS
        // ============================================
        const cosmos = document.getElementById('cosmos');
        for (let i = 0; i < 50; i++) {
            const star = document.createElement('div');
            star.className = 'star';
            star.style.left = Math.random() * 100 + '%';
            star.style.top = Math.random() * 100 + '%';
            const size = Math.random() * 2 + 1;
            star.style.width = size + 'px';
            star.style.height = size + 'px';
            star.style.setProperty('--d', (Math.random() * 4 + 3) + 's');
            star.style.setProperty('--t', (Math.random() * 5) + 's');
            cosmos.appendChild(star);
        }

        // ============================================
        // VOLUME SCREEN
        // ============================================
        const volumeScreen = document.getElementById('volumeScreen');
        const intro = document.getElementById('intro');
        const introEnter = document.getElementById('introEnter');
        const main = document.getElementById('main');
        const langToggle = document.getElementById('langToggle');
        const ambientIndicator = document.getElementById('ambientIndicator');
        const steps = document.querySelectorAll('.intro-step');

        // Audio elements
        const ambientAudio = document.getElementById('ambientAudio');
        const mainAudio = document.getElementById('mainAudio');
        
        ambientAudio.volume = 0.15; // Volumen bajo para ambiente

        volumeScreen.addEventListener('click', () => {
            volumeScreen.classList.add('hidden');
            
            // Start ambient audio
            ambientAudio.play().then(() => {
                ambientIndicator.classList.add('playing');
            }).catch(e => console.log('Ambient audio blocked:', e));

            // Show intro
            setTimeout(() => {
                intro.classList.add('show');
                startIntroSequence();
            }, 500);
        });

        // ============================================
        // INTRO SEQUENCE
        // ============================================
        let currentStep = 0;
        const durations = [2500, 3000, 2800, 3500, 0];

        function showStep(i) {
            steps.forEach((s, idx) => {
                s.classList.remove('active', 'done');
                if (idx < i) s.classList.add('done');
                else if (idx === i) s.classList.add('active');
            });
            if (i === 4) setTimeout(() => introEnter.classList.add('show'), 500);
        }

        function nextStep() {
            if (currentStep < 4) {
                currentStep++;
                showStep(currentStep);
                if (durations[currentStep] > 0) setTimeout(nextStep, durations[currentStep]);
            }
        }

        function startIntroSequence() {
            showStep(0);
            setTimeout(nextStep, durations[0]);
        }

        introEnter.addEventListener('click', () => {
            intro.classList.add('hidden');
            setTimeout(() => {
                main.classList.add('show');
                langToggle.classList.add('show');
                ambientIndicator.classList.add('show');
            }, 300);
        });

        // ============================================
        // AMBIENT TOGGLE
        // ============================================
        let ambientPlaying = true;

        ambientIndicator.addEventListener('click', () => {
            if (ambientPlaying) {
                ambientAudio.pause();
                ambientIndicator.classList.remove('playing');
            } else {
                ambientAudio.play();
                ambientIndicator.classList.add('playing');
            }
            ambientPlaying = !ambientPlaying;
        });

        // ============================================
        // LANGUAGE
        // ============================================
        let lang = 'es';
        const langText = document.getElementById('langText');

        langToggle.addEventListener('click', () => {
            const els = document.querySelectorAll('.translatable');
            const newLang = lang === 'es' ? 'ar' : 'es';
            
            els.forEach(el => el.classList.add('switching'));
            
            setTimeout(() => {
                document.documentElement.dir = newLang === 'ar' ? 'rtl' : 'ltr';
                document.documentElement.lang = newLang;
                els.forEach(el => {
                    if (el.dataset[newLang]) el.innerHTML = el.dataset[newLang];
                });
                langText.textContent = newLang === 'ar' ? 'Español' : 'العربية';
                lang = newLang;
                setTimeout(() => els.forEach(el => el.classList.remove('switching')), 50);
            }, 350);
        });

        // ============================================
        // MAIN AUDIO PLAYER
        // ============================================
        const playBtn = document.getElementById('playBtn');
        const playIcon = document.getElementById('playIcon');
        const playerVinyl = document.getElementById('playerVinyl');
        const progressBar = document.getElementById('progressBar');
        const progressFill = document.getElementById('progressFill');
        const currentTimeEl = document.getElementById('currentTime');
        const durationEl = document.getElementById('duration');
        
        let mainPlaying = false;

        const formatTime = s => {
            if (isNaN(s)) return '0:00';
            const m = Math.floor(s / 60);
            const sec = Math.floor(s % 60);
            return m + ':' + (sec < 10 ? '0' : '') + sec;
        };

        playBtn.addEventListener('click', () => {
            if (mainPlaying) {
                mainAudio.pause();
                playerVinyl.classList.remove('spinning');
                
                // Resume ambient if it was playing
                if (ambientPlaying) {
                    ambientAudio.play();
                    ambientIndicator.classList.add('playing');
                }
            } else {
                // Pause ambient when main plays
                ambientAudio.pause();
                ambientIndicator.classList.remove('playing');
                
                mainAudio.play();
                playerVinyl.classList.add('spinning');
            }
            
            mainPlaying = !mainPlaying;
            playIcon.innerHTML = mainPlaying 
                ? '<rect x="6" y="4" width="4" height="16"/><rect x="14" y="4" width="4" height="16"/>'
                : '<polygon points="5,3 19,12 5,21"/>';
            playBtn.classList.toggle('playing', mainPlaying);
        });

        mainAudio.addEventListener('timeupdate', () => {
            const pct = (mainAudio.currentTime / mainAudio.duration * 100) || 0;
            progressFill.style.width = pct + '%';
            currentTimeEl.textContent = formatTime(mainAudio.currentTime);
        });

        mainAudio.addEventListener('loadedmetadata', () => {
            durationEl.textContent = formatTime(mainAudio.duration);
        });
        
        mainAudio.addEventListener('ended', () => {
            mainPlaying = false;
            playIcon.innerHTML = '<polygon points="5,3 19,12 5,21"/>';
            playBtn.classList.remove('playing');
            playerVinyl.classList.remove('spinning');
            progressFill.style.width = '0%';
            
            // Resume ambient
            if (ambientPlaying) {
                ambientAudio.play();
                ambientIndicator.classList.add('playing');
            }
        });

        progressBar.addEventListener('click', e => {
            const rect = progressBar.getBoundingClientRect();
            const pct = (e.clientX - rect.left) / rect.width;
            mainAudio.currentTime = pct * mainAudio.duration;
        });

        document.getElementById('rewindBtn').addEventListener('click', () => {
            mainAudio.currentTime = Math.max(0, mainAudio.currentTime - 10);
        });

        document.getElementById('forwardBtn').addEventListener('click', () => {
            mainAudio.currentTime = Math.min(mainAudio.duration || 0, mainAudio.currentTime + 10);
        });

        // ============================================
        // DOWNLOAD
        // ============================================
        document.getElementById('downloadBtn').addEventListener('click', () => {
            const link = document.createElement('a');
            link.href = 'cancion_f.mp3';
            link.download = 'Thaddath_Inu_Para_Fatima.mp3';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        });

        // ============================================
        // LYRICS
        // ============================================
        const lyricsToggle = document.getElementById('lyricsToggle');
        const lyricsContent = document.getElementById('lyricsContent');

        lyricsToggle.addEventListener('click', () => {
            lyricsToggle.classList.toggle('open');
            lyricsContent.classList.toggle('open');
        });

        // ============================================
        // SCROLL ANIMATIONS
        // ============================================
        const observer = new IntersectionObserver(entries => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                }
            });
        }, { threshold: 0.1 });

        document.querySelectorAll('.timeline-item, .wish-card').forEach(el => {
            observer.observe(el);
        });
    })();
    </script>


</body></html>
